
DROP TABLE IF EXISTS users CASCADE;
DROP TABLE IF EXISTS menu_item CASCADE;
DROP TABLE IF EXISTS menu CASCADE;
DROP TABLE IF EXISTS vote CASCADE;
DROP TABLE IF EXISTS place CASCADE;

DROP SEQUENCE USER_SEQ IF EXISTS;
DROP SEQUENCE MENU_SEQ IF EXISTS;

CREATE SEQUENCE USER_SEQ AS INTEGER START WITH 10;
CREATE SEQUENCE MENU_SEQ AS INTEGER START WITH 10;

CREATE TABLE users
(
    id               INTEGER GENERATED BY DEFAULT AS SEQUENCE USER_SEQ PRIMARY KEY,
    username         VARCHAR(255)            NOT NULL,
    password         VARCHAR(255)            NOT NULL,
    role             VARCHAR(10)             NOT NULL
);

CREATE TABLE menu
(
    menu_id                INTEGER GENERATED BY DEFAULT AS SEQUENCE SEQUENCE MENU_SEQ PRIMARY KEY,
    FOREIGN KEY(place_id)  REFERENCES place (place_id) ON DELETE CASCADE
    created_at             TIMESTAMP NOT NULL,
);